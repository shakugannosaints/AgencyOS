@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Inter:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  :root[data-theme='win98'] .rounded-sm,
  :root[data-theme='win98'] .rounded,
  :root[data-theme='win98'] .rounded-md,
  :root[data-theme='win98'] .rounded-lg,
  :root[data-theme='win98'] .rounded-xl,
  :root[data-theme='win98'] .rounded-2xl,
  :root[data-theme='win98'] .rounded-3xl,
  :root[data-theme='win98'] .rounded-full,
  :root[data-theme='retro'] .rounded-sm,
  :root[data-theme='retro'] .rounded,
  :root[data-theme='retro'] .rounded-md,
  :root[data-theme='retro'] .rounded-lg,
  :root[data-theme='retro'] .rounded-xl,
  :root[data-theme='retro'] .rounded-2xl,
  :root[data-theme='retro'] .rounded-3xl,
  :root[data-theme='retro'] .rounded-full {
    border-radius: 0 !important;
  }
}

:root {
  --agency-ink: 13 13 15;
  --agency-panel: 16 17 26;
  --agency-border: 38 40 59;
  --agency-cyan: 7 240 255;
  --agency-magenta: 255 15 154;
  --agency-amber: 245 181 76;
  --agency-muted: 140 147 176;
  --agency-glow-top: 7 240 255;
  --agency-glow-bottom: 255 15 154;
  font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
  color: rgb(var(--agency-cyan) / 1);
  background-color: rgb(var(--agency-ink) / 1);
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

:root[data-theme='day'] {
  --agency-ink: 248 246 244;
  --agency-panel: 255 255 255;
  --agency-border: 224 214 214;
  --agency-cyan: 215 38 61;
  --agency-magenta: 140 28 48;
  --agency-amber: 210 120 60;
  --agency-muted: 130 110 120;
  --agency-glow-top: 215 38 61;
  --agency-glow-bottom: 255 255 255;
}

:root[data-theme='win98'] {
  --agency-ink: 0 128 128;         /* 经典 Win98 桌面青色 #008080 */
  --agency-panel: 192 192 192;     /* 经典 Win98 窗口灰 #c0c0c0 */
  --agency-border: 128 128 128;    /* 深灰边框 */
  --agency-cyan: 0 0 0;            /* 主文字黑色 */
  --agency-magenta: 0 0 128;       /* 标题栏深蓝 #000080 */
  --agency-amber: 255 0 0;         /* 警告红 */
  --agency-muted: 64 64 64;        /* 加深灰色，提高清晰度 #404040 */
  --agency-glow-top: 0 128 128;    /* 移除发光，保持背景色 */
  --agency-glow-bottom: 0 128 128;
  font-family: 'MS Sans Serif', 'Tahoma', 'Segoe UI', sans-serif;
  --win98-gray-light: #dfdfdf;
  --win98-gray-dark: #808080;
  --win98-gray-darker: #404040;
  --win98-white: #ffffff;
  --win98-black: #000000;
}

:root[data-theme='retro'] {
  --agency-ink: 192 192 192;       /* 桌面灰 */
  --agency-panel: 236 233 216;     /* 窗口背景 */
  --agency-border: 128 128 128;    /* 深灰边框 */
  --agency-cyan: 0 0 0;            /* 主文字黑色 */
  --agency-magenta: 0 0 128;       /* 深蓝强调 */
  --agency-amber: 128 0 0;         /* 深红警告 */
  --agency-muted: 80 80 80;        /* 深灰说明文字 */
  --agency-glow-top: 192 192 192;  /* 关闭霓虹，仅保留灰 */
  --agency-glow-bottom: 192 192 192;
  font-family: 'Segoe UI', system-ui, sans-serif;
}

:root[data-theme='fluent'] {
  --agency-ink: 243 243 243;       /* Mica Alt background */
  --agency-panel: 255 255 255;     /* White surface */
  --agency-border: 229 229 229;    /* Subtle border */
  --agency-cyan: 0 120 212;        /* Windows Blue */
  --agency-magenta: 194 57 179;    /* Windows Magenta */
  --agency-amber: 202 80 16;       /* Windows Orange */
  --agency-muted: 97 97 97;        /* Secondary text */
  --agency-glow-top: 243 243 243;
  --agency-glow-bottom: 243 243 243;
  font-family: 'Segoe UI Variable', 'Segoe UI', system-ui, sans-serif;
}

:root[data-theme='day'] .text-white,
[data-theme='day'] .text-white {
  color: #241a1a !important;
}

:root[data-theme='win98'] .text-white,
[data-theme='win98'] .text-white,
:root[data-theme='retro'] .text-white,
[data-theme='retro'] .text-white,
:root[data-theme='fluent'] .text-white,
[data-theme='fluent'] .text-white {
  color: #1a1a1a !important;
}

/* Win98 Specific Overrides */
:root[data-theme='win98'] body {
  background: rgb(var(--agency-ink));
  background-image: none;
}

:root[data-theme='win98'] ::selection {
  background-color: #000080;
  color: #ffffff;
}

/* Classic 3D Borders */
:root[data-theme='win98'] .border,
:root[data-theme='win98'] .border-2,
:root[data-theme='win98'] .border-agency-border {
  border: none !important;
  box-shadow: inset 1px 1px #dfdfdf, inset 2px 2px #ffffff, inset -1px -1px #808080, inset -2px -2px #404040;
  background-color: rgb(var(--agency-panel));
}

/* Inset for inputs/panels */
:root[data-theme='win98'] .win98-inset,
:root[data-theme='win98'] input,
:root[data-theme='win98'] textarea,
:root[data-theme='win98'] .bg-agency-ink\/50,
:root[data-theme='win98'] .bg-black\/20 {
  border: none !important;
  box-shadow: inset 1px 1px #404040, inset 2px 2px #808080, inset -1px -1px #ffffff, inset -2px -2px #dfdfdf !important;
  background-color: #ffffff !important;
  color: #000000 !important;
}

/* Buttons */
:root[data-theme='win98'] button:not(.ghost) {
  box-shadow: inset 1px 1px #ffffff, inset 2px 2px #dfdfdf, inset -1px -1px #808080, inset -2px -2px #404040 !important;
  background-color: rgb(var(--agency-panel)) !important;
  color: #000000 !important;
  border: none !important;
}

:root[data-theme='win98'] button:not(.ghost):active {
  box-shadow: inset 1px 1px #404040, inset 2px 2px #808080, inset -1px -1px #ffffff, inset -2px -2px #dfdfdf !important;
  transform: translate(1px, 1px);
}

/* Active state for navigation items (Inset) */
:root[data-theme='win98'] .win98-active {
  box-shadow: inset 1px 1px #404040, inset 2px 2px #808080, inset -1px -1px #ffffff, inset -2px -2px #dfdfdf !important;
  background-color: #dfdfdf !important; /* Dotted grid pattern would be cool but solid gray is fine */
  color: #000000 !important;
  font-weight: bold;
}

/* Classic Title Bar */
:root[data-theme='win98'] .win98-title-bar {
  background: linear-gradient(90deg, #000080, #1084d0);
  color: #ffffff;
  padding: 2px 4px;
  font-weight: bold;
  letter-spacing: 1px;
}

body {
  min-height: 100vh;
  margin: 0;
  background: radial-gradient(circle at top, rgba(var(--agency-glow-top) / 0.12), transparent 45%),
    radial-gradient(circle at bottom, rgba(var(--agency-glow-bottom) / 0.08), transparent 35%),
    rgb(var(--agency-ink) / 1);
  color: rgb(var(--agency-cyan) / 1);
}

@layer base {
  * {
    border-color: rgb(var(--agency-border) / 1);
  }

  html {
    background-color: rgb(var(--agency-ink) / 1);
    color: rgb(var(--agency-cyan) / 1);
    overflow-y: scroll;
  }

  body {
    font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
  }

  a {
    color: rgb(var(--agency-cyan) / 1);
    text-decoration-thickness: 1px;
    text-underline-offset: 4px;
  }

  a:hover {
    color: rgb(var(--agency-magenta) / 1);
  }

  ::selection {
    background-color: rgb(var(--agency-magenta) / 1);
    color: rgb(var(--agency-ink) / 1);
  }
}

/* Fluent Design Specific Overrides */
:root[data-theme='fluent'] body {
  background: #f3f3f3;
  background-image: radial-gradient(circle at 50% 0%, #ffffff 0%, #f3f3f3 100%);
}

/* Mica/Acrylic Panels */
:root[data-theme='fluent'] .bg-agency-ink\/40,
:root[data-theme='fluent'] .bg-agency-ink\/60,
:root[data-theme='fluent'] .bg-agency-ink\/80,
:root[data-theme='fluent'] .bg-agency-panel {
  background-color: rgba(255, 255, 255, 0.7) !important;
  backdrop-filter: blur(20px) saturate(120%);
  border: 1px solid rgba(0, 0, 0, 0.06) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
  border-radius: 8px !important;
}

/* Inputs */
:root[data-theme='fluent'] input,
:root[data-theme='fluent'] select,
:root[data-theme='fluent'] textarea {
  background-color: rgba(255, 255, 255, 0.8) !important;
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
  border-bottom: 1px solid rgba(0, 0, 0, 0.3) !important;
  border-radius: 4px !important;
  color: #1a1a1a !important;
  transition: all 0.2s ease;
}

:root[data-theme='fluent'] input:focus,
:root[data-theme='fluent'] select:focus,
:root[data-theme='fluent'] textarea:focus {
  background-color: #ffffff !important;
  border-bottom-color: rgb(var(--agency-cyan)) !important;
  border-bottom-width: 2px !important;
  outline: none !important;
}

/* Buttons */
:root[data-theme='fluent'] button {
  border-radius: 4px !important;
  transition: all 0.1s ease;
}

:root[data-theme='fluent'] button:not(.ghost):not([type='submit']) {
  background-color: #ffffff !important;
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  color: #1a1a1a !important;
}

:root[data-theme='fluent'] button:not(.ghost):not([type='submit']):hover {
  background-color: #f9f9f9 !important;
  border-color: rgba(0, 0, 0, 0.2) !important;
}

/* Primary Buttons (Submit/Action) */
:root[data-theme='fluent'] button[type='submit'],
:root[data-theme='fluent'] button.bg-agency-cyan {
  background-color: rgb(var(--agency-cyan)) !important;
  color: #ffffff !important;
  border: none !important;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

:root[data-theme='fluent'] button[type='submit']:hover {
  opacity: 0.9;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

/* Typography */
:root[data-theme='fluent'] h1,
:root[data-theme='fluent'] h2,
:root[data-theme='fluent'] h3 {
  font-weight: 600 !important;
  letter-spacing: -0.02em !important;
}

:root[data-theme='fluent'] .text-agency-muted {
  color: rgba(0, 0, 0, 0.6) !important;
}

/* Selection */
:root[data-theme='fluent'] ::selection {
  background-color: rgb(var(--agency-cyan));
  color: #ffffff;
}
